<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Stéréo</title>
</head>

<body>
    <h1>Stereo</h1>
    <input type="number" step="0.1" min="-1" max="1" id="panning" value="0" onchange="panNode.pan.value = panning.value;">
    <button onclick="go()">Play</button>
    <button onclick="stop()">Stop</button>
</body>
<script>
    let audio = document.createElement("audio");
    let audioCtx, source, panNode;
    
    function go() {
        if (!audioCtx) {
            audioCtx = new window.AudioContext();
            source = audioCtx.createMediaElementSource(audio);
            // Create a stereo panner
            panNode = audioCtx.createStereoPanner();
            source.connect(panNode);
            panNode.connect(audioCtx.destination);
        }
        panNode.pan.value = panning.value;
        audio.src = "colvert.mp3";
        audio.play();
    }

    function stop() {
        audio.pause();
    }
</script>